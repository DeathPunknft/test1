<!DOCTYPE html>
<html>

<head lang="en">
    <link rel="icon" href="./favicon.ico">
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1" />
    <meta name="author" content="zhy" />
    <link rel="stylesheet" href="./Content/Styles/mint.css">
    <link rel="stylesheet" href="./Content/Styles/main.css">
    <link rel="stylesheet" href="./Content/Styles/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script src="./Scripts/jQuery/jquery.min.js"></script>
    <script src="./Scripts/web3/web3.min.js"></script>
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
    <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>
    <title>DA-AGE - Decentralized Asset RWA</title>
</head>
<style>
    .modal {
      text-align: center;
    }
  
    .modal:before {
      content: '';
      display: inline-block;
      height: 100%;
      vertical-align: middle;
      margin-right: -4px; /* 调整间距 */
    }
  
    .modal-dialog {
      display: inline-block;
      text-align: left;
      vertical-align: middle;
    }
  
    .modal-content {
      width: 90%; /* 将宽度调整为 90% */
      max-width: 800px; /* 设置最大宽度为 800px */
      height: 90%; /* 将高度调整为 90% */
      max-height: 600px; /* 设置最大高度为 600px */
      margin: 0 auto; /* 居中 */
    }
  </style>
  <style>
    .image-container {
      width: 600px;
      height: 600px;
      overflow: hidden;
    }
    .image-container img {
      width: 100%;
      height: auto;
    }
  </style>

<body>
    <div class="container-fluid">
        <div class="row">
            <div class="body-bg-black">
                <div class="navBar text-center">
                    <div class="navBar-left">
                        <a href="https://da-age.io/" target="_blank"><img src='./Content/Images/dan.png' /></a>
                    </div>
                    
                    <div class="navBar-right text-right">

                        <a href="javascript:void(0);" id="connect-wallet" class="nav-link">Connect Wallet</a>

                        
                        <a href="javascript:void(0);" id="verify" class="verify">Verify</a>
                        
                    </div>
                </div>
                <div class="fn-section-4 wf-section">
                    <div class="fn-container-grid-2">
                        <div id="w-node-_61f80125-2bc5-ec0f-c12b-cc3b5c7923ed-305ff47e" class="fn-column-center-2">
                            <h1 class="title-da-age">DA AGE RWA PRESALE!</h1>
                            <p class="fn-paragraph-2">Congratulations, you are one of the lucky few who made it to our
                                WhiteList!<br />You are able to mint the NFTs at the price of
                                210USDT.<br /><br />Experience the
                                thrill of the unknown! After you mint your NFT, you will have to wait for the big reveal
                                to find out
                                which prime location and zone you have landed. With numerous prime locations to choose
                                from, the
                                exact location and zone you receive will be a surprise. So, keep your fingers crossed
                                and hope for
                                the best!u&#x27;ll receive. So, brace yourself and wish yourself the best of
                                luck!<br /><br />‍</p>
                            
                        </div>
                        <div class="image-container">
                            <img src="./Content/Images/SeedMember-DA-AGE.jpg" alt="1080x1080 Image" />
                          </div>
                    </div>
                </div>
                
                <div class="footer wf-section">
                    
                        <div class="w-layout-grid footer-grid">
                            <div class="footer-main-box"><a data-ix="logo" href="https://da-age.io/" target="_blank"
                                    class="footer-logo w-nav-brand"><img
                                        src="https://uploads-ssl.webflow.com/6421898f81ec56cd303380ec/642d5a98952aaf152d2447d9_DAAGE_sss_sss.png"
                                        width="218" alt="" class="logo" /></a>
                                <p class="paragraph large grey">Own your digital assets in the age of decentralization -
                                    with DA AGE
                                    (Starting from 2023)</p>
                            </div>
                            <ul>
                                <li>
                                    <a href="https://twitter.com/DA_AGE_EN" target="_blank" class="social-link">
                                        <img src='./Content/Images/twitter.png' width="20px" height="20px" />
                                    </a>
                                </li>
                                <li>
                                    <a href="https://discord.com/invite/DA-AGE-Global" target="_blank" class="social-link">
                                        <img src='./Content/Images/discord.png' width="20px" height="20px" />
                                    </a>
                                </li>
    
                                <li>
                                    <a href="https://www.da-age.io/" target="_blank" class="social-link">
                                        <img src='./Content/Images/home.png' width="20px" height="20px" />
                                    </a>
                                </li>
                            </ul>
                        </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <span id="dialogTime" style="color: #000;"></span>
              <button id="dialogClose" type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">
              <div style="width: 100%;padding: 60px 0px;text-align: center;">
                <span class="glyphicon glyphicon-ok" aria-hidden="true" style="color: #67C23A;font-size: 120px;"></span>
                <span class="glyphicon glyphicon-remove" aria-hidden="true" style="color: #F56C6C;font-size: 120px;" ></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    
    
</body>

</html>

<script type="text/javascript">

    var network = "main"; // network type
    var net_data_map = {
        testnet: {
            chainId: "0x13881",
            chainName: "Polygon Mumbai",
            nativeCurrency: {
                name: "MATIC",
                symbol: "MATIC",
                decimals: 18
            },
            rpcUrls: ["https://rpc.ankr.com/polygon_mumbai"],
            blockExplorerUrls: ["https://mumbai.polygonscan.com/"]
        },
        main: {
            chainId: "0x89",
            chainName: "Polygon Mainnet",
            nativeCurrency: {
                name: "MATIC",
                symbol: "MATIC",
                decimals: 18
            },
            rpcUrls: ["https://polygon.llamarpc.com"],
            blockExplorerUrls: ["https://polygonscan.com/"]
        }
    }
  
    var memberDaAgeContractABI = [
    {
        "inputs":[
            {
                "internalType":"address",
                "name":"owner",
                "type":"address"
            }
        ],
        "name":"balanceOf",
        "outputs":[
            {
                "internalType":"uint256",
                "name":"",
                "type":"uint256"
            }
        ],
        "stateMutability":"view",
        "type":"function"
    }
       
            ];

    var memberDaAgeContract = "0xf96E490e46A6eBC38e7C2B180ef2b0ED2481Efe6";
    
    
    const provider = window.ethereum || window.web3 || (window.bitkeep && window.bitkeep.ethereum);
    var web3 = new Web3(provider);
    var gasMultiple = 1.5;
    var gasMultiple1 = 1.3;

    
    var isConnect = window.localStorage.getItem("selectedWallet");
    
    var walletPlaceholderText = "Connect Wallet";
    var wallet = new Proxy({ address: walletPlaceholderText }, {
        set(obj, prop, value) {
            if (prop === "address") {
                if (value && value != walletPlaceholderText) {

                   $("#connect-wallet").html(`${value.slice(0, 5)}...${value.slice(-5, value.length)}`);
                   
                    
                } else {
                    $("#connect-wallet").html(walletPlaceholderText);
                    
                }
            }
            if (prop == "chainId") {
                if (value !== net_data_map[network].chainId) {
                    if (["0x1", "0x2", "0x3", "0x4", "0x5"].includes(net_data_map[network].chainId)) {
                        // add ethereum chain switch
                        window.ethereum.request({
                            method: "wallet_switchEthereumChain",
                            "params": [
                                {
                                    "chainId": net_data_map[network].chainId,
                                }
                            ]
                        })
                    } else {
                        window.ethereum.request({
                            method: 'wallet_addEthereumChain',
                            params: [net_data_map[network], wallet.address]
                        })
                            .then((result) => { })
                            .catch((error) => { })
                    }

                }

            }
            obj[prop] = value
        }
    });

    var mintBtn = new Proxy({ disable: false }, {
        set(obj, prop, value) {
            obj[prop] = value
        }
    });

    provider.on("accountsChanged", (accounts) => {
        wallet.address = accounts[0] || walletPlaceholderText;
    })

    provider.on('disconnect', (error) => {
        
        wallet.address = walletPlaceholderText
        
    });

    provider.on('chainChanged', (chainId) => {
        wallet.chainId = chainId;
        connectWallet(provider)
    });

    function connectWallet(provider) {

        provider.enable().then(async (accounts) => {
            wallet.address = accounts[0];
            wallet.chainId = provider.chainId;
            window.localStorage.setItem("selectedWallet", "INJECTED")
           
        }).catch(error => {
            console.log(error);
        });
    }

    
    async function getBalanceOf(address){
        
    }

   

    var timeFormat = function timeFormatFunction(){
            var now = new Date();
            var formattedDate = now.getFullYear() + '-' + 
                (now.getMonth() < 9 ? '0' : '') + (now.getMonth() + 1) + '-' + 
                (now.getDate() < 10 ? '0' : '') + now.getDate() + ' ' + 
                (now.getHours() < 10 ? '0' : '') + now.getHours() + ':' + 
                (now.getMinutes() < 10 ? '0' : '') + now.getMinutes() + ':' + 
                (now.getSeconds() < 10 ? '0' : '') + now.getSeconds();
            return formattedDate;
    };


    var timer = null;


    $("#verify").on("click", async () => {

        if (wallet.address === walletPlaceholderText) {
            connectWallet(provider)
            return;
        }

        $("#dialogTime").text(timeFormat());

        let nftContract = new web3.eth.Contract(memberDaAgeContractABI,memberDaAgeContract);
        var result = 0;
        result = await nftContract.methods.balanceOf(wallet.address).call();

        if(result === 0){

             
             var removeIcon = document.querySelector('.glyphicon.glyphicon-remove');

           
            removeIcon.classList.add('hidden');

        }else{

            
            var removeIconOk = document.querySelector('.glyphicon.glyphicon-ok');

            
            removeIconOk.classList.add('hidden');

        }

        await new Promise((resolve) => {
            timer = setInterval(function(){
            $("#dialogTime").text(timeFormat());
            resolve();
            }, 1000);
        });

        $("#myModal").modal({ backdrop: 'static', keyboard: false });

    });


    $("#dialogClose").on("click",()=> {
      $("#dialogTime").text("");
      clearInterval(timer);
    });

</script>